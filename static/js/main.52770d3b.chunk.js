(this["webpackJsonpsnake-react"]=this["webpackJsonpsnake-react"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),r=n(8),a=n.n(r),o=(n(16),n(7),n(10)),u=n(3),s=n(2),l=n(19),d=n(1),f=function(e){var t=e.type;return Object(d.jsx)("div",{className:"field ".concat(t)})},j=function(e,t){return t.some((function(t){return Boolean(t.x===e.x&&t.y===e.y)}))},b=function(e){var t=e.fieldWidth,n=e.fieldHeight,i=e.snake,c=e.food;return Object(d.jsx)("div",{className:"wrapper",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)"),maxWidth:30*t},children:l.a(0,t*n).map((function(e){var r=(e-e%t)/t,a=e%n,o=j({x:a,y:r},i),u=c&&c.x===a&&c.y===r,s=o?"snake":u?"food":"empty";return Object(d.jsx)(f,{type:s},e)}))})};function x(){var e=Object(i.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=function(e){var t=e.code;t!==n&&c(t)},a=function(e){e.code===n&&c(null)};return Object(i.useEffect)((function(){if("object"===typeof window)return window.addEventListener("keydown",r),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",a)}}),[r,a]),n}var O=c.a.createContext(null),h=function(){return Object(i.useContext)(O)},y={"-y":["KeyW","ArrowUp"],"+y":["KeyS","ArrowDown"],"-x":["KeyA","ArrowLeft"],"+x":["KeyD","ArrowRight"]},p=["-y","+y","-x","+x"],v=function(){var e=function(){var e=x(),t=e&&p.find((function(t){return y[t].includes(e)}))||null,n=h();return t||n||null}(),t=Object(i.useState)(null),n=Object(s.a)(t,2),c=n[0],r=n[1];Object(i.useEffect)((function(){e&&r(e)}),[c,e]);return[c,function(){return r(null)}]},m=function(e){var t=e.fps,n=e.on,c=Object(i.useState)(!1),r=Object(s.a)(c,2),a=r[0],o=r[1];return Object(i.useEffect)((function(){n?o(!0):setTimeout((function(){o(!1)}),1001/t)}),[n]),Object(i.useEffect)((function(){a&&n&&(o(!1),setTimeout((function(){o(!0)}),1e3/t))}),[t,n,a]),a&&n},g=[10,15,20],S=function(e){var t=e.gameState,n=e.startGame,i=e.score,c=e.setFieldSize;return Object(d.jsxs)("div",{className:"controls",children:["ready"!==t&&Object(d.jsxs)("p",{className:"text",children:["score: ",i]}),"ready"===t&&Object(d.jsx)("button",{onClick:n,children:"Start game"}),"running"!==t&&Object(d.jsx)("div",{className:"select-filed-size-wrapper",children:g.map((function(e){return Object(d.jsx)("button",{className:"size-button",onClick:function(){return c(e)},children:e},e)}))}),"lost"===t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"text",children:"You lost"}),Object(d.jsx)("button",{onClick:n,children:"Start over"})]})]})},w={fieldWidth:15,fieldHeight:15,initialSnake:[{x:1,y:0},{x:0,y:0}],initialSpeed:4,initialDirection:"+x",maxSpeed:15,speedIncrement:.25},k=function(e){return{x:"+x"===e?1:"-x"===e?-1:0,y:"+y"===e?1:"-y"===e?-1:0}},E=function(e,t,n){var i=t*n,c=i-e.length,r=e.map((function(e){return e.x+e.y*n})),a=l.a(0,i).filter((function(e){return!r.includes(e)}))[function(e,t){var n=e>t?t:e,i=e>t?e:t;return Math.floor(Math.random()*(i-n)+n)}(0,c)];return{x:a%n,y:(a-a%t)/t}},N=function(){var e=Object(i.useState)(w),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)([]),a=Object(s.a)(r,2),l=a[0],f=a[1],x=Object(i.useState)(w.initialDirection),O=Object(s.a)(x,2),h=O[0],y=O[1],p=v(),g=Object(s.a)(p,2),N=g[0],W=g[1],C=Object(i.useState)("ready"),H=Object(s.a)(C,2),L=H[0],A=H[1],D=Object(i.useState)(null),F=Object(s.a)(D,2),T=F[0],z=F[1],I=Object(i.useState)(w.initialSpeed),K=Object(s.a)(I,2),B=K[0],M=K[1];Object(i.useEffect)((function(){"running"===L&&z(E(l,w.fieldWidth,w.fieldHeight))}),[L,z]);var P=m({fps:B,on:"running"===L});return Object(i.useEffect)((function(){if(P&&l.length){var e=l[0],t=function(e,t){var n=k(t),i=k(e);return n.x&&n.x===-i.x||n.y&&n.y===-i.y||!t?e:t}(h,N),i=k(t);y(t),W();var c={x:e.x+i.x,y:e.y+i.y},r=function(e,t,n,i){return!(e.x>=n||e.x<0||e.y>=i||e.y<0||j(e,t))}(c,l,n.fieldWidth,n.fieldHeight);if(r){var a=T&&c.x===T.x&&c.y===T.y,u=[c].concat(Object(o.a)(a?l:l.slice(0,-1)));a&&(B<n.maxSpeed&&M(B+n.speedIncrement),z(E(u,n.fieldWidth,n.fieldHeight))),f(u)}else A("lost")}}),[P,l,f,h,y,N]),Object(d.jsxs)("div",{className:"gameWrapper",children:[Object(d.jsx)(S,{gameState:L,startGame:function(){W(),f(n.initialSnake),y(n.initialDirection),M(n.initialSpeed),A("running")},score:l.length-n.initialSnake.length,setFieldSize:function(e){c(Object(u.a)(Object(u.a)({},n),{},{fieldHeight:e,fieldWidth:e}))}}),Object(d.jsx)(b,{fieldWidth:n.fieldWidth,fieldHeight:n.fieldHeight,snake:l,food:T})]})},W=n(9),C={Up:"-y",Down:"+y",Left:"-x",Right:"+x"},H=function(e){var t=e.children,n=Object(i.useState)(null),c=Object(s.a)(n,2),r=c[0],a=c[1],o=Object(W.useSwipeable)({onSwiping:function(e){var t=e.dir;a(C[t])},onSwiped:function(){return a(null)}});return console.log("direction",r),Object(d.jsx)(O.Provider,{value:r,children:Object(d.jsx)("div",Object(u.a)(Object(u.a)({className:"swipe-container"},o),{},{children:t}))})},L=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(H,{children:Object(d.jsx)("div",{className:"App-header",children:Object(d.jsx)(N,{})})})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),c(e),r(e),a(e)}))};a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root")),A()},7:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.52770d3b.chunk.js.map